!function(){"use strict";function e(e){var t=JSON.parse(window.localStorage.getItem("DATA"));if(t){var n=Object.keys(t);Array.from(document.querySelectorAll(".date")).slice(1).forEach(function(a){var r=document.querySelector(".rightside ."+a.innerHTML.slice(0,3)),o=r.getElementsByTagName("div");Array.from(o).forEach(function(e){e.parentNode.removeChild(e)});for(var i=0;i<26;i++){var l=document.createElement("div");l.className="rightside-column-content",r.appendChild(l)}var d=n.filter(function(t){return a.classList.contains(t.split("/")[0])&&t.split("/")[1]===e.dateMonth});console.log(d),d.forEach(function(n){t[n].forEach(function(t){var n=t.slice(0,2),a=e.timeArray.indexOf(t[2]),r=e.timeArray.indexOf(t[3]);if(0===o[a].getElementsByTagName("p").length){n.forEach(function(e){var t=document.createElement("p"),n=document.createTextNode(e);t.appendChild(n),o[a].appendChild(t)}),o[a].firstChild.classList.add("title"),o[a].lastChild.classList.add("body"),o[a].style.wordWrap="break-word";for(var i=1*a;i<r;i++)o[i].style.backgroundColor="#e6eeff"}})})})}}function t(e){var t=document.querySelector("form"),a=t.elements.event.value,r=t.elements.details.value,o=t.elements.timestart.value,i=t.elements.timeend.value,l=[a,r,o,i],d=JSON.parse(window.localStorage.getItem("DATA"));if(d||(d={}),""===r)return void alert("Details is a required field");if(o===i)return void alert("Start time and End time cannot be the same");if(""===a)return void alert("Event name is a required field");var c=document.querySelector(".highlighted"),s=1*e.dateDay+(e.weekArray.indexOf(c.parentElement.className.slice(17,20))-e.dateDayIndex),u=s+"/"+e.dateMonth;d[u]?d[u].push(l):(d[u]=[],d[u]=[l]);var m=JSON.stringify(d);window.localStorage.setItem("DATA",m),n(l,e)}function n(e,t){var n=t.timeArray.indexOf(e[2]),a=t.timeArray.indexOf(e[3]),r=e.slice(0,2),o=document.querySelector(".highlighted").parentElement.getElementsByTagName("div");r.forEach(function(e){var t=document.createElement("p"),a=document.createTextNode(e);t.appendChild(a),o[n].appendChild(t)}),o[n].firstChild.classList.add("title"),o[n].lastChild.classList.add("body"),o[n].style.wordWrap="break-word";for(var i=1*n;i<a;i++)o[i].style.backgroundColor="#e6eeff";document.querySelector(".modal").style.display="none",document.querySelector(".highlighted").classList.remove("highlighted"),window.setTimeout(function(){document.querySelector(".rightside").classList.remove("pause")},10)}function a(e){function n(){document.querySelector(".modal").style.display="none",r.remove("highlighted"),window.setTimeout(function(){a.classList.remove("pause")},10)}event.stopPropagation();var a=document.querySelector(".rightside");if(!(Array.from(a.classList).includes("pause")||event.target.classList.length>1)){a.classList.add("pause");var r=event.target.classList;r.add("highlighted");var o=event.clientY-20,i=event.clientX+30;o>500&&(o-=220),i>1e3&&(i-=280);var l=document.querySelector(".modal"),d=document.querySelector(".modal-container");d.style.top=o+"px",d.style.left=i+"px",l.style.display="flex",document.querySelector(".addbutton").addEventListener("click",function(){return t(e)}),document.querySelector(".cancelbutton").addEventListener("click",n)}}function r(e){this.today=e,this.dd=this.today.getDate(),this.mm=this.today.getMonth(),this.yyyy=this.today.getFullYear(),this.monthArray=["January","February","March","April","May","June","July","August","September","October","November","December"],this.monthArrayDays=[31,28,31,30,31,30,31,31,30,31,30,31],this.weekArray=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],this.timeArray=["730am","800am","830am","900am","930am","1000am","1030am","1100am","1130am","1200pm","1230pm","100pm","130pm","200pm","230pm","300pm","330pm","400pm","430pm","500pm","530pm","600pm","630pm","700pm","730pm","800pm","830pm"],this.splitDate=this.today.toString().split(" "),this.currentDay=this.splitDate[0],this.currentDayTag="."+this.currentDay,this.dateDay=this.splitDate[2],this.dateMonth=this.monthArray[this.mm],this.totalDaysInMonth=this.monthArrayDays[this.monthArray.indexOf(this.dateMonth)],this.dateDayIndex=this.weekArray.indexOf(this.currentDay),this.timeZone=this.splitDate[5].substring(0,6),this.counterWeek=0}function o(){return new r(new Date)}function i(e){var t=e.counterWeek;t++;var n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate()+7*t),o=new r(a);if(o.counterWeek=t,"Mon"!==o.currentDay&&o.dateMonth!==e.dateMonth){var i=new Date(n.getFullYear(),n.getMonth(),n.getDate()+(7*t-o.dateDayIndex));if(o.monthArray[i.getMonth()]!==o.dateMonth)return o.dateMonth=o.monthArray[i.getMonth()],o;o.dateMonth=o.monthArray[o.mm]}return o}function l(e){var t=e.counterWeek;t--;var n=new Date,a=new Date(n.getFullYear(),n.getMonth(),n.getDate()+7*t),o=new r(a);o.counterWeek=t;var i=new Date(n.getFullYear(),n.getMonth(),n.getDate()+(7*t-o.dateDayIndex));return o.dateMonth=o.monthArray[i.getMonth()],o}function d(t){document.querySelector(".timezone").innerHTML=t.timeZone;var n=document.querySelector(t.currentDayTag),r=new Date,o=r.getDate();t.dd===o?n.parentElement.style.color="#ff3333":n.parentElement.style.color="",Array.from(document.querySelectorAll(".date span")).forEach(function(e){var n=1*t.dateDay+(t.weekArray.indexOf(e.classList.value)-t.dateDayIndex);n>t.totalDaysInMonth&&(n=Math.abs(n-t.totalDaysInMonth)),n<=0&&(n+=t.totalDaysInMonth),e.innerHTML=n,e.parentElement.classList.length<2?e.parentElement.classList.add(n):(e.parentElement.classList.remove(e.parentElement.classList[1]),e.parentElement.classList.add(n))});var i=document.querySelectorAll(".date"),l=document.querySelector(".header-monthof");1*i[1].classList[1]>1*i[7].classList[1]?l.innerHTML="\n        "+t.dateMonth+"\n        /"+t.monthArray[t.monthArray.indexOf(t.dateMonth)+1]:l.innerHTML=t.dateMonth;var d=Array.from(document.querySelectorAll(".rightside-column"));d[0].children.length<26&&d.forEach(function(e){for(var t=0;t<26;t++){var n=document.createElement("div");n.className="rightside-column-content",e.appendChild(n)}}),e(t),Array.from(document.querySelectorAll(".rightside-column-content")).forEach(function(e){return e.addEventListener("click",function(){return a(t)})})}var c=function(){var e=new r(new Date),t=function(){e=i(e),d(e)},n=function(){e=l(e),d(e)},a=function(){e=o(),d(e)};document.querySelector(".plus-week").addEventListener("click",t),document.querySelector(".minus-week").addEventListener("click",n),document.querySelector(".header-title").addEventListener("click",a),document.querySelector(".clear-calendar").addEventListener("click",function(){window.localStorage.clear(),window.location.reload()}),d(e)};document.addEventListener("DOMContentLoaded",c)}();
